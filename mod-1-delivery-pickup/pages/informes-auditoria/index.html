
<!doctype html>
<html lang="es">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>Auditor√≠a ‚Äî Delivery & Pickup</title>
		<link rel="icon" type="image/x-icon" href="/favicon.ico" />
		<link rel="stylesheet" href="/styles/tailwind.css" />
		<link rel="stylesheet" href="/shared/styles/global.css" />
		<link rel="stylesheet" href="/mod-1-delivery-pickup/pages/informes-auditoria/page.css" />
	</head>
	<body class="antialiased text-slate-900">
		<header class="flex items-start sm:items-center justify-between gap-4">
			<div>
				<h1 class="text-2xl sm:text-3xl font-extrabold">Auditor√≠a</h1>
				<p class="mt-1 text-sm text-slate-600">Consola de logs operativos.</p>
			</div>
			<div class="flex items-center gap-2">
				<button
					id="dpAuditRefresh"
					type="button"
					class="inline-flex items-center justify-center rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm font-semibold text-slate-800 hover:bg-slate-50"
				>
					Actualizar
				</button>
				<button
					id="dpAuditExport"
					type="button"
					class="inline-flex items-center justify-center rounded-xl bg-brand-800 px-4 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-brand-700"
				>
					Exportar
				</button>
			</div>
		</header>

		<main class="mt-5 grid grid-cols-1 xl:grid-cols-[1fr_420px] gap-4">
			<section class="bg-white border border-slate-200 rounded-2xl shadow-[0_1px_0_rgba(16,24,40,0.03)] p-5 min-w-0">
				<div class="flex flex-col gap-3">
					<div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3">
						<div class="dp-audit-bar">
							<div class="dp-range">
								<span class="dp-range__icon" aria-hidden="true">üïí</span>
								<input id="dpAuditFrom" type="datetime-local" class="dp-range__input" />
								<span class="dp-range__sep" aria-hidden="true">‚Äî</span>
								<input id="dpAuditTo" type="datetime-local" class="dp-range__input" />
							</div>
							<select id="dpAuditStatus" class="dp-filter" aria-label="Estado">
								<option value="">Status (Todos)</option>
								<option value="PENDING_REVIEW">PENDING_REVIEW</option>
								<option value="IN_KITCHEN">IN_KITCHEN</option>
								<option value="READY_FOR_DISPATCH">READY_FOR_DISPATCH</option>
								<option value="EN_ROUTE">EN_ROUTE</option>
								<option value="DELIVERED">DELIVERED</option>
								<option value="CANCELLED">CANCELLED</option>
							</select>
							<input id="dpAuditManagerId" type="text" class="dp-filter dp-mono" placeholder="manager_id (uuid)" />
							<input id="dpAuditNoteId" type="text" class="dp-filter dp-mono" placeholder="note_id (uuid)" />
							<select id="dpAuditLimit" class="dp-filter" aria-label="L√≠mite">
								<option value="50" selected>50</option>
								<option value="100">100</option>
								<option value="200">200</option>
								<option value="500">500</option>
							</select>
						</div>
						<div class="flex items-center justify-between lg:justify-end gap-3">
							<div id="dpAuditMeta" class="text-xs text-slate-500"></div>
							<div class="flex items-center gap-2">
								<button id="dpAuditPrev" type="button" class="inline-flex items-center justify-center rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-50">‚Üê</button>
								<button id="dpAuditNext" type="button" class="inline-flex items-center justify-center rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-50">‚Üí</button>
							</div>
						</div>
					</div>

					<div id="dpAuditError" class="hidden rounded-xl border border-rose-200 bg-rose-50 p-3 text-sm text-rose-800"></div>
				</div>

				<div class="mt-4 dp-table-wrap">
					<table class="dp-table">
						<thead>
							<tr>
								<th>Timestamp</th>
								<th>Orden</th>
								<th>Manager</th>
								<th>Transici√≥n</th>
								<th>Motivo</th>
							</tr>
						</thead>
						<tbody id="dpAuditTableBody"></tbody>
					</table>
				</div>
			</section>

			<aside class="bg-white border border-slate-200 rounded-2xl shadow-[0_1px_0_rgba(16,24,40,0.03)] p-5 dp-detail" aria-live="polite">
				<div class="flex items-start justify-between gap-3">
					<div>
						<h2 class="text-lg font-extrabold text-slate-900">Detalle</h2>
						<p id="dpAuditDetailHint" class="mt-1 text-sm text-slate-600">Selecciona un evento para inspeccionarlo.</p>
					</div>
					<button id="dpAuditDetailClose" type="button" class="hidden dp-icon-btn" aria-label="Cerrar">‚úï</button>
				</div>

				<div id="dpAuditDetail" class="mt-4 hidden">
					<div class="dp-detail-kv">
						<div class="dp-detail-kv__k">Timestamp</div>
						<div id="dpDetailTimestamp" class="dp-detail-kv__v dp-mono"></div>
					</div>
					<div class="dp-detail-kv">
						<div class="dp-detail-kv__k">log_id</div>
						<div id="dpDetailLogId" class="dp-detail-kv__v dp-mono"></div>
					</div>
					<div class="dp-detail-kv">
						<div class="dp-detail-kv__k">note_id</div>
						<div id="dpDetailNoteId" class="dp-detail-kv__v dp-mono"></div>
					</div>
					<div class="dp-detail-kv">
						<div class="dp-detail-kv__k">Manager</div>
						<div id="dpDetailManager" class="dp-detail-kv__v"></div>
					</div>
					<div class="dp-detail-kv">
						<div class="dp-detail-kv__k">Estado</div>
						<div id="dpDetailTransition" class="dp-detail-kv__v dp-mono"></div>
					</div>
					<div class="dp-detail-kv">
						<div class="dp-detail-kv__k">Motivo</div>
						<div id="dpDetailReason" class="dp-detail-kv__v"></div>
					</div>

					<div class="mt-4">
						<a id="dpDetailOpenOrder" class="inline-flex items-center justify-center rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-50" href="#">Ver pedido</a>
					</div>

					<div class="mt-4">
						<h3 class="text-sm font-extrabold text-slate-900">Evento (JSON)</h3>
						<pre id="dpDetailJson" class="mt-2 dp-json"></pre>
					</div>
				</div>
			</aside>
		</main>
		<script type="module" src="/mod-1-delivery-pickup/pages/informes-auditoria/page.js"></script>
	</body>
</html>